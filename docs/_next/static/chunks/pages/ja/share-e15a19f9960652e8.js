(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{910:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ja/share",function(){return n(4027)}])},4027:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return W}});var t=n(7568),l=n(1799),r=n(9396),a=n(655),i=n(5893),c=n(9417),d=n(7814),x=n(7294),o=(0,x.forwardRef)(function(e,s){var n,t=e.comment,l=e.onChange,r=(0,x.useState)(!1),a=r[0],o=r[1];return((0,x.useImperativeHandle)(s,function(){return{finishEditing:function(){o(!1)}}}),a||""!=t)?a?(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:["コメント",(0,i.jsx)("small",{className:"ml-2",children:"コメントが2行以上の場合、1行目がタイトルとして表示されます。"})]}),(0,i.jsx)("textarea",{rows:4,className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"この本は...",value:t,onChange:function(e){l(e.target.value)}})]}):(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:" lg:w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",title:"Woman holding a mug"}),(0,i.jsx)("div",{className:"border border-gray-400 lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",children:(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,i.jsx)(d.G,{icon:c.Mzg}),(0,i.jsx)("span",{className:"pl-1",children:"コメント"}),(0,i.jsxs)("span",{className:"font-bold text-secondary",children:["(",(0,i.jsx)("u",{className:"cursor-pointer",onClick:function(){o(!0)},children:"編集"})," ","/"," ",(0,i.jsx)("u",{className:"cursor-pointer",onClick:function(){l(""),o(!0)},children:"新しくコメントする"}),")"]})]}),(n=t.split("\n")).length>1?(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"text-gray-900 font-bold text-xl my-2",children:n[0]}),(0,i.jsx)("p",{className:"text-gray-700 text-base",children:n.slice(1).join("\n")})]}):(0,i.jsx)("p",{className:"text-gray-700 text-base",children:t})]})})]}):(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("span",{className:"underline cursor-pointer",onClick:function(){o(!0)},children:"この本にコメントを残す"})})}),u=n(5474),m=n(5717),h=n(3108),j=n(6),f=n(5921),b=n(1443),p=n(1664),N=n.n(p),g=n(6774),y=function(e){var s=e.errorText;return(0,i.jsxs)("div",{className:"text-center mt-2 mx-auto",style:{maxWidth:"1250px"},children:[(0,i.jsxs)("div",{className:"py-10 text-start px-3 bg-gray-100 relative mx-auto",style:{height:"80vh",minHeight:"500px",maxHeight:"800px"},children:[(0,i.jsxs)("div",{className:"relative flex flex-col justify-between z-10 h-full",children:[(0,i.jsxs)("div",{className:"bg-white rounded w-fit mx-2 p-2",style:{fontFamily:"'游明朝 Medium','Yu Mincho',YuMincho,'Hiragino Mincho Pro',serif"},children:[(0,i.jsx)("h1",{className:"text-3xl text-my-color md:text-4xl",children:"読書日より"}),(0,i.jsx)("hr",{className:"mt-1"}),(0,i.jsx)("p",{className:"text-slate-500 text-sm md:text-base",children:"登録不要で簡単に書籍を共有することができます。"})]}),(0,i.jsx)("div",{className:"mx-auto w-full",style:{maxWidth:"800px"},children:(0,i.jsx)(g.Z,{errorText:s})}),(0,i.jsx)("p",{className:"pt-2 px-2 text-white text-end opacity-90",children:(0,i.jsxs)("small",{children:["Painted by"," ",(0,i.jsx)("a",{href:"https://www.midjourney.com/",className:"underline",children:"Midjourney"}),"."]})})]}),(0,i.jsx)("div",{className:"absolute py-3 px-1 h-full w-full top-0 right-0",children:(0,i.jsx)("div",{className:"relative h-full w-full",children:(0,i.jsx)("img",{className:"object-cover ml-auto z-0 rounded-md h-full w-full",src:"/mid_thumbnail.webp",alt:"Painted by Midjourney"})})})]}),(0,i.jsx)("p",{className:"text-center text-secondary",children:(0,i.jsx)(N(),{href:"/ja/help/find",children:(0,i.jsxs)("a",{className:"underline",children:[(0,i.jsx)(d.G,{icon:c.Psp,className:"mr-2"}),"書籍が見つからない場合..."]})})})]})},v=n(7094),w=n(1055),k=n(909),S=function(e){var s=e.isbn;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-center items-center m-3",children:[(0,i.jsx)(v.Z,{isbn:s}),(0,i.jsx)(k.Z,{isbn:s}),(0,i.jsx)(w.Z,{isbn:s})]}),(0,i.jsx)("p",{className:"text-center text-secondary",children:(0,i.jsx)(N(),{href:"/ja/help/find",children:(0,i.jsxs)("a",{className:"underline",children:[(0,i.jsx)(d.G,{icon:c.Psp,className:"mr-2"}),"取り扱い書店の追加をリクエストする..."]})})})]})},Z=n(7313),_=n(7259),C=n(4549),E=n(2337),P=n(2336),R=n(9881),G=n(4274),M=n(4184),T=n.n(M),U=n(1163),W=function(){var e=function(){return"string"==typeof g?decodeURIComponent(g):""},s=(0,U.useRouter)(),n=s.query,p=n.isbn,N=n.from,g=n.comment,v=(0,x.useContext)(b.F),w=(0,x.useState)(null),k=w[0],M=w[1],W=function(e){M((0,l.Z)({},e,(0,G.convertIsbn)(e.isbn)))},z=(0,x.useState)(""),H=z[0],I=z[1],L=(0,x.useState)(!1),q=L[0],B=L[1],Y=(0,x.useState)(!1),F=Y[0],O=Y[1],X=(0,x.useState)(""),$=X[0],D=X[1],V=(0,x.useRef)(null);(0,x.useEffect)(function(){ee(e())},[g]);var A,J,K=(0,x.useState)(e()),Q=K[0],ee=K[1],es=(0,x.useState)(),en=es[0],et=es[1];return(0,x.useEffect)(function(){s.isReady&&((_.x.build().then(function(e){return et(e)}),"string"==typeof p)?(B(!1),(0,E.Rd)(p,"string"==typeof N?N:"").then(function(e){e?(W(e),B(!1)):I("書籍情報を見つけることができませんでした。")}).catch(function(){I("通信エラー。時間を置いてからご確認ください。")})):B(!0))},[s.query]),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Z,{title:"本を知り合いに紹介する - 読書日より/Share Books",description:"登録不要で簡単に書籍を共有・紹介できるサイトです。書籍レビューや書店へのリンクを含む共有URLを発行することができます。ご自由にお使いください。",pageUrl:"https://books.sn-10.net/ja/share",ogType:"product"}),(0,i.jsx)(j.Z,{}),(0,i.jsx)("main",{children:(0,i.jsx)("div",{className:"w-full px-2 ",children:q||""!=H?(0,i.jsx)(y,{errorText:H}):k?(0,i.jsxs)("div",{className:"mx-auto",style:{maxWidth:"1250px"},children:[(0,i.jsxs)("div",{className:"flex items-center justify-center pt-5 pb-2",children:[function(){if(""!=k.thumbnail)return(0,i.jsx)("span",{className:"mr-2",children:(0,i.jsx)(u.Z,{src:k.thumbnail})})}(),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-3xl",children:k.title}),(0,i.jsxs)("p",{className:"text-center",children:[(0,i.jsxs)("span",{className:T()({hidden:""==k.author}),children:["著者: ",k.author]}),(0,i.jsxs)("span",{className:T()({hidden:""==k.author||""==k.publisher}),children:[" ","/"," "]}),(0,i.jsxs)("span",{className:T()({hidden:""==k.publisher}),children:["出版社 :",k.publisher]})]})]})]}),(0,i.jsxs)("p",{className:"text-secondary flex content-center justify-center items-center",children:[(0,i.jsx)("span",{className:"pr-2",children:"ISBN"}),(0,i.jsxs)("p",{className:"flex flex-col",children:[(0,i.jsxs)("span",{children:["10桁 : ",k.isbn10," ",(0,i.jsx)("button",{onClick:function(){O(!F)},className:"text-xl "+T()({hidden:F}),children:(0,i.jsx)(d.G,{icon:c.eW2})})]}),(0,i.jsxs)("span",{className:T()({hidden:!F}),children:["13桁 : ",k.isbn13]})]})]}),(0,i.jsx)("p",{className:"text-center mt-1 line-clamp-5",children:k.description}),(0,i.jsxs)("div",{className:"p-10",children:[(0,i.jsx)(o,{comment:Q,onChange:function(e){ee(e)},ref:V}),(0,i.jsxs)("div",{className:"text-center mt-6 mb-10",children:[(0,i.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded",onClick:function(){var e;D("共有URLをコピーしました。"),null==V||null===(e=V.current)||void 0===e||e.finishEditing(),C.Z.writeText(v.makeSharePageUrl(k.isbn,k.from,Q)),null==en||en.sendMessage({key:"completedSharing",data:{type:"default",url:""}})},children:["この本を共有する",(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"URLをコピー"})]}),function(){if(""!=$)return(0,i.jsx)("p",{className:"text-center text-secondary",children:(0,i.jsx)("small",{children:$})})}(),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mt-3 flex justify-center items-center flex-wrap",children:[(A="",A=""!=Q?(Q.length>75?Q.slice(0,70)+"...":Q)+"\n\n"+"書籍「".concat(k.title,"」"):"書籍「".concat(k.title,"」"),J=v.makeSharePageUrl(k.isbn,k.from,Q),(0,i.jsx)(Z.Z,{text:A,url:J})),(0,i.jsxs)("button",{onClick:function(){var e;D("マークダウン形式でコピーしました。"),null==V||null===(e=V.current)||void 0===e||e.finishEditing(),C.Z.writeText((0,R.GE)({bookData:k,comment:Q,isWriteSiteName:!0},v)),null==en||en.sendMessage({key:"completedSharing",data:{type:"default",url:""}})},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full inline-flex items-center m-2",children:[(0,i.jsx)(d.G,{icon:c.kZ_,className:"mr-1"}),(0,i.jsx)("span",{children:"マークダウン形式で共有"})]}),(0,i.jsxs)("button",{onClick:(0,t.Z)(function(){return(0,a.__generator)(this,function(e){return null==en||en.requestCardGeneration((0,r.Z)((0,l.Z)({},k),{comment:Q})),[2]})}),className:T()({hidden:!v.checkExperimental()})+" bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 rounded-full inline-flex items-center m-2",children:[(0,i.jsx)(d.G,{icon:c.VmB,className:"mr-1"}),(0,i.jsx)("span",{children:"カードを作成"})]})]}),(0,i.jsxs)("small",{className:"text-secondary",children:[(0,i.jsx)("b",{children:"note"}),"や",(0,i.jsx)("b",{children:"Notion"}),"などのサイトには「マークダウン形式で共有」がおすすめです!"]})]}),(0,i.jsx)("a",{href:(0,P.k5)([new URL(v.makeSharePageUrl(k.isbn,k.from,Q)),],"amazon",""),className:"underline text-blue-500 mt-2",children:"他の書籍とまとめて共有する"})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:"pt-2",children:[(0,i.jsxs)("h1",{className:"text-xl",children:[(0,i.jsx)(d.G,{icon:c.Y$T,className:"mr-2"}),"書店を探す"]}),(0,i.jsx)("small",{children:"紙の書籍と電子書籍両方のリンクが含まれます。選択にご注意ください。"}),(0,i.jsx)(S,{isbn:k.isbn})]})]})]}):(0,i.jsx)("div",{children:(0,i.jsx)(f.Z,{})})})}),(0,i.jsx)(m.$,{})]})}}},function(e){e.O(0,[948,996,235,57,774,888,179],function(){return e(e.s=910)}),_N_E=e.O()}]);