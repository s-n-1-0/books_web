(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{910:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ja/share",function(){return t(4027)}])},4027:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var n=t(5893),r=t(9417),l=t(7814),a=t(7294),i=(0,a.forwardRef)(function(e,s){var t,i=e.comment,c=e.onChange,d=(0,a.useState)(!1),o=d[0],x=d[1];return((0,a.useImperativeHandle)(s,function(){return{finishEditing:function(){x(!1)}}}),o||""!=i)?o?(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:["コメント",(0,n.jsx)("small",{className:"ml-2",children:"コメントが2行以上の場合、1行目がタイトルとして表示されます。"})]}),(0,n.jsx)("textarea",{rows:4,className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"この本は...",value:i,onChange:function(e){c(e.target.value)}})]}):(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{className:" lg:w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",title:"Woman holding a mug"}),(0,n.jsx)("div",{className:"border border-gray-400 lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",children:(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,n.jsx)(l.G,{icon:r.Mzg}),(0,n.jsx)("span",{className:"pl-1",children:"コメント"}),(0,n.jsxs)("span",{className:"font-bold text-secondary",children:["(",(0,n.jsx)("u",{className:"cursor-pointer",onClick:function(){x(!0)},children:"編集"})," ","/"," ",(0,n.jsx)("u",{className:"cursor-pointer",onClick:function(){c(""),x(!0)},children:"新しくコメントする"}),")"]})]}),(t=i.split("\n")).length>1?(0,n.jsxs)("div",{children:[" ",(0,n.jsx)("div",{className:"text-gray-900 font-bold text-xl my-2",children:t[0]}),(0,n.jsx)("p",{className:"text-gray-700 text-base",children:t.slice(1).join("\n")})]}):(0,n.jsx)("p",{className:"text-gray-700 text-base",children:i})]})})]}):(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("span",{className:"underline cursor-pointer",onClick:function(){x(!0)},children:"この本にコメントを残す"})})}),c=t(5474),d=t(1511),o=t(9028),x=t(5921),u=t(1664),h=t.n(u),m=t(4770),j=function(e){var s=e.errorText;return(0,n.jsxs)("div",{className:"text-center mt-2 mx-auto",style:{maxWidth:"1250px"},children:[(0,n.jsxs)("div",{className:"py-10 text-start px-3 bg-gray-100 relative mx-auto",style:{height:"80vh",minHeight:"500px",maxHeight:"800px"},children:[(0,n.jsxs)("div",{className:"relative flex flex-col justify-between z-10 h-full",children:[(0,n.jsxs)("div",{className:"bg-white rounded w-fit mx-2 p-2",style:{fontFamily:"'游明朝 Medium','Yu Mincho',YuMincho,'Hiragino Mincho Pro',serif"},children:[(0,n.jsx)("h1",{className:"text-3xl text-my-color md:text-4xl",children:"読書日より"}),(0,n.jsx)("hr",{className:"mt-1"}),(0,n.jsx)("p",{className:"text-slate-500 text-sm md:text-base",children:"登録不要で簡単に書籍を共有することができます。"})]}),(0,n.jsx)("div",{className:"mx-auto w-full",style:{maxWidth:"800px"},children:(0,n.jsx)(m.Z,{errorText:s})}),(0,n.jsx)("p",{className:"pt-2 px-2 text-white text-end opacity-90",children:(0,n.jsxs)("small",{children:["Painted by"," ",(0,n.jsx)("a",{href:"https://www.midjourney.com/",className:"underline",children:"Midjourney"}),"."]})})]}),(0,n.jsx)("div",{className:"absolute py-3 px-1 h-full w-full top-0 right-0",children:(0,n.jsx)("div",{className:"relative h-full w-full",children:(0,n.jsx)("img",{className:"object-cover ml-auto z-0 rounded-md h-full w-full",src:"https://hello.sn-10.net/apps/books/mid_thumbnail.webp",alt:"Painted by Midjourney"})})})]}),(0,n.jsx)("p",{className:"text-center text-secondary",children:(0,n.jsx)(h(),{href:"/ja/help/find",children:(0,n.jsxs)("a",{className:"underline",children:[(0,n.jsx)(l.G,{icon:r.Psp,className:"mr-2"}),"書籍が見つからない場合..."]})})})]})},f=t(7094),b=t(1055),p=t(909),N=function(e){var s=e.isbn;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-center items-center m-3",children:[(0,n.jsx)(f.Z,{isbn:s}),(0,n.jsx)(p.Z,{isbn:s}),(0,n.jsx)(b.Z,{isbn:s})]}),(0,n.jsx)("p",{className:"text-center text-secondary",children:(0,n.jsx)(h(),{href:"/ja/help/find",children:(0,n.jsxs)("a",{className:"underline",children:[(0,n.jsx)(l.G,{icon:r.Psp,className:"mr-2"}),"取り扱い書店の追加をリクエストする..."]})})})]})},g=t(7313),y=t(3430),v=t(4549),w=t(2336),k=t(9881),S=t(1163),_=function(){var e=function(){return"string"==typeof m?decodeURIComponent(m):""},s=(0,S.useRouter)(),t=s.query,u=t.isbn,h=t.from,m=t.comment,f=(0,a.useState)(null),b=f[0],p=f[1],_=(0,a.useState)(""),Z=_[0],C=_[1],E=(0,a.useState)(!1),T=E[0],R=E[1],G=(0,a.useState)(""),M=G[0],P=G[1],U=(0,a.useRef)(null);(0,a.useEffect)(function(){I(e())},[m]);var W,z,H=(0,a.useState)(e()),L=H[0],I=H[1];return(0,a.useEffect)(function(){s.isReady&&("string"==typeof u?(R(!1),(0,w.X7)(u,"string"==typeof h?h:"").then(function(e){e?(p(e),R(!1)):C("書籍情報を見つけることができませんでした。")}).catch(function(){C("通信エラー。時間を置いてからご確認ください。")})):R(!0))},[s.query]),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{title:"本を知り合いに紹介する - 読書日より/Share Books",description:"登録不要で簡単に書籍を共有・紹介できるサイトです。書籍レビューや書店へのリンクを含む共有URLを発行することができます。ご自由にお使いください。",pageUrl:"https://books.sn-10.net/ja/share",ogType:"product"}),(0,n.jsx)(o.Z,{}),(0,n.jsx)("main",{children:(0,n.jsx)("div",{className:"w-full px-2 ",children:T||""!=Z?(0,n.jsx)(j,{errorText:Z}):b?(0,n.jsxs)("div",{className:"mx-auto",style:{maxWidth:"1250px"},children:[(0,n.jsxs)("div",{className:"flex items-center justify-center pt-5 pb-2",children:[function(){if(""!=b.thumbnail)return(0,n.jsx)("span",{className:"mr-2",children:(0,n.jsx)(c.Z,{src:b.thumbnail})})}(),(0,n.jsx)("span",{className:"text-3xl",children:b.title})]}),(0,n.jsxs)("p",{className:"text-secondary text-center",children:[(0,n.jsxs)("span",{className:"text-xl",children:["ISBN : ",b.isbn]}),(0,n.jsx)("button",{className:"text-sm bg-transparent hover:bg-blue-500 text-blue-500 font-semibold hover:text-white py-1 px-2 border border-blue-500 hover:border-transparent rounded ml-2",onClick:function(){v.Z.writeText(b.isbn)},children:"コピー"})]}),(0,n.jsxs)("p",{className:"text-center",children:[function(){if(""!=b.author)return(0,n.jsxs)("span",{children:["著者: ",b.author]})}(),function(){if(""!=b.publisher){var e=""!=b.author?" / ":"";return(0,n.jsxs)("span",{children:[e,"出版社 :",b.publisher]})}}()]}),(0,n.jsx)("p",{className:"text-center mt-1 line-clamp-5",children:b.description}),(0,n.jsxs)("div",{className:"p-10",children:[(0,n.jsx)(i,{comment:L,onChange:function(e){I(e)},ref:U}),(0,n.jsxs)("div",{className:"text-center mt-6 mb-10",children:[(0,n.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded",onClick:function(){var e;P("共有URLをコピーしました。"),null==U||null===(e=U.current)||void 0===e||e.finishEditing(),v.Z.writeText((0,w.Sn)(b.isbn,b.from,L)),(0,y.bG)({key:"completedSharing",data:{type:"default",url:""}})},children:["この本を共有する",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"URLをコピー"})]}),function(){if(""!=M)return(0,n.jsx)("p",{className:"text-center text-secondary",children:(0,n.jsx)("small",{children:M})})}(),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mt-3 flex justify-center items-center flex-wrap",children:[(W="",W=""!=L?(L.length>75?L.slice(0,70)+"...":L)+"\n\n"+"書籍「".concat(b.title,"」の紹介"):"書籍「".concat(b.title,"」の紹介です。"),z=(0,w.Sn)(b.isbn,b.from,L),(0,n.jsx)(g.Z,{text:W,url:z})),(0,n.jsxs)("button",{onClick:function(){var e;P("マークダウン形式でコピーしました。"),null==U||null===(e=U.current)||void 0===e||e.finishEditing(),v.Z.writeText((0,k.GE)({bookData:b,comment:L,isWriteSiteName:!0})),(0,y.bG)({key:"completedSharing",data:{type:"default",url:""}})},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full inline-flex items-center m-2",children:[(0,n.jsx)(l.G,{icon:r.kZ_,className:"mr-1"}),(0,n.jsx)("span",{children:"マークダウン形式で共有"})]})]}),(0,n.jsxs)("small",{className:"text-secondary",children:[(0,n.jsx)("b",{children:"note"}),"や",(0,n.jsx)("b",{children:"Notion"}),"などのサイトには「マークダウン形式で共有」がおすすめです!"]})]}),(0,n.jsx)("a",{href:(0,w.k5)([new URL((0,w.Sn)(b.isbn,b.from,L)),],"amazon",""),className:"underline text-blue-500 mt-2",children:"他の書籍とまとめて共有する"})]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("div",{className:"pt-2",children:[(0,n.jsxs)("h1",{className:"text-xl",children:[(0,n.jsx)(l.G,{icon:r.Y$T,className:"mr-2"}),"書店を探す"]}),(0,n.jsx)("small",{children:"紙の書籍と電子書籍両方のリンクが含まれます。選択にご注意ください。"}),(0,n.jsx)(N,{isbn:b.isbn})]})]})]}):(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{})})})}),(0,n.jsxs)("footer",{children:[(0,n.jsx)("hr",{}),(0,n.jsx)("p",{className:"text-center",children:(0,n.jsx)("a",{className:"underline",href:"https://hello.sn-10.net",children:"sn-10.net"})})]})]})}}},function(e){e.O(0,[948,996,551,535,774,888,179],function(){return e(e.s=910)}),_N_E=e.O()}]);