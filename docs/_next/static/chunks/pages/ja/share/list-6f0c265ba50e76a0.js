(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{5877:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ja/share/list",function(){return t(2419)}])},1511:function(e,n,t){"use strict";var r=t(5893),o=t(9008),i=t.n(o);n.Z=function(e){var n=e.title,t=e.description,o=void 0===t?"":t,s=e.pageUrl,a=e.ogType,l=e.noindex,c=void 0!==l&&l;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:n}),function(){if(""!=o)return(0,r.jsx)("meta",{name:"description",content:o})}(),(0,r.jsx)("link",{rel:"icon",href:"/images/icon_web.png"}),(0,r.jsx)("link",{rel:"canonical",href:s}),(0,r.jsx)("meta",{property:"og:url",content:s}),(0,r.jsx)("meta",{property:"og:type",content:a}),(0,r.jsx)("meta",{property:"og:title",content:n}),(0,r.jsx)("meta",{property:"og:image",content:"https://books.sn-10.net/images/ogp.png"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary"}),function(){if(c)return(0,r.jsx)("meta",{name:"robots",content:"noindex"})}()]})}},9028:function(e,n,t){"use strict";var r=t(5893),o=t(4184),i=t.n(o),s=t(1664),a=t.n(s),l=t(7294);n.Z=function(e){var n=e.isMenu,t=void 0===n||n,o=(0,l.useState)(!1),s=o[0],c=o[1],u=i()("w-full","flex-grow","lg:flex","lg:items-center","lg:w-auto",{hidden:!s,block:s});return(0,r.jsx)("header",{children:(0,r.jsxs)("nav",{className:"flex items-center justify-between flex-wrap bg-my-color p-6",children:[(0,r.jsx)("div",{className:"flex items-center flex-shrink-0 text-white mr-6",children:(0,r.jsx)(a(),{href:"/ja/share",children:(0,r.jsx)("a",{className:"font-semibold text-xl tracking-tight",children:(0,r.jsx)("span",{children:"Share Books"})})})}),function(){if(t)return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"block lg:hidden",children:(0,r.jsx)("button",{onClick:function(){return c(!s)},className:"flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white",children:(0,r.jsxs)("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Menu"}),(0,r.jsx)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)("div",{className:"text-sm lg:flex-grow"}),(0,r.jsx)("div",{children:(0,r.jsx)(a(),{href:"/ja/share",children:(0,r.jsx)("a",{className:"inline-block text-sm px-4 py-2 leading-none border rounded text-white border-white hover:border-transparent hover:text-teal-500 hover:bg-white mt-4 lg:mt-0",children:"本を探す"})})})]})]})}()]})})}},5474:function(e,n,t){"use strict";var r=t(5893);n.Z=function(e){var n=e.src;return(0,r.jsx)("img",{src:n,alt:"",style:{position:"relative",minWidth:"60px",maxWidth:"100px",height:"100px",maxHeight:"200px"},className:"object-contain"})}},1326:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(5893),o=t(3244),i=t(3024),s=t(7814),a=t(4274),l=function(e){var n=e.color,t=e.children,o=void 0===n?{color:"bg-blue-500",hoverColor:"hover:bg-blue-700"}:n,i="font-bold py-2 px-4 rounded ".concat(o.color," text-white ").concat(o.hoverColor);return(0,r.jsx)("button",{className:i,children:t})},c=function(e){var n=e.isbn,t=(0,a.convertIsbn2Url)(n);return(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){(0,o.m)({storeName:"amazon",isbn:n})},children:(0,r.jsx)(l,{color:{color:"bg-neutral-700",hoverColor:"hover:bg-neutral-900"},children:(0,r.jsxs)("span",{children:[(0,r.jsx)(s.G,{icon:i._sB}),(0,r.jsx)("span",{className:"ml-2",children:"Amazon"})]})})})}},1055:function(e,n,t){"use strict";var r=t(5893),o=t(3244),i=t(4274);n.Z=function(e){var n,t=e.isbn,s=13==t.length?t:null!==(n=(0,i.convertIsbn)(t))&&void 0!==n?n:t;return(0,r.jsx)("a",{href:"https://honto.jp/netstore/search.html?isbn="+s,target:"_blank",rel:"noopener noreferrer",className:"m-2",onClick:function(){(0,o.m)({storeName:"amazon",isbn:t})},children:(0,r.jsx)("img",{src:"https://i.gyazo.com/ee86b2469f712858a4e1b0ce17684939.png",alt:"hontoロゴ",style:{height:"50px",width:"inherit",objectFit:"contain"}})})}},909:function(e,n,t){"use strict";var r=t(5893),o=t(3244),i=t(4274);n.Z=function(e){var n,t=e.isbn,s=13==t.length?t:null!==(n=(0,i.convertIsbn)(t))&&void 0!==n?n:t;return(0,r.jsx)("a",{href:"https://www.kinokuniya.co.jp/f/dsg-01-"+s,target:"_blank",rel:"noopener noreferrer",className:"m-2",onClick:function(){(0,o.m)({storeName:"kinokuniya",isbn:t})},children:(0,r.jsx)("img",{src:"https://corp.kinokuniya.co.jp/wp-content/uploads/2020/07/logo.png",alt:"紀伊國屋ロゴ",style:{height:"125px",width:"inherit",objectFit:"contain"}})})}},3244:function(e,n,t){"use strict";t.d(n,{m:function(){return o}});var r=t(4274);function o(e){var n,t,o=e.storeName,i=e.isbn;gtag("event","to_store",{event_category:o,event_label:13==i.length?i:null!==(n=(0,r.convertIsbn)(i))&&void 0!==n?n:i,value:"1"})}},4946:function(e,n,t){"use strict";t.d(n,{W:function(){return a},a:function(){return l}});var r=t(7568),o=t(655),i=t(9669),s=t.n(i);function a(e){var n,t="".concat("https://www.googleapis.com/books/v1/volumes","?q="),r=e.q,o=!1;return(null==r?void 0:r.intitle)&&(o=!0,t+="intitle:".concat(encodeURI(r.intitle))),(null==r?void 0:r.isbn)&&(o&&(t+="+"),o=!0,t+="isbn:"+r.isbn),s().get("".concat(t,"&startIndex=").concat(null!==(n=e.startIndex)&&void 0!==n?n:0))}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(function(e){var n,t,r,i;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,a({q:{isbn:e}})];case 1:return[2,null!=(i=(null!==(r=null==(t=n.sent().data)?void 0:t.items)&&void 0!==r?r:[]).find(function(n){return n.volumeInfo.industryIdentifiers.find(function(n){return n.identifier==e})}))?i:null]}})})).apply(this,arguments)}},2419:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(7568);function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,n)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=t(655),a=t(5893),l=t(1799),c=t(7294),u=(0,c.createContext)({bookDataCaches:{},addBookData:function(e,n){}}),d=function(e){var n=e.children,t=(0,c.useContext)(u),r=(0,c.useState)(t.bookDataCaches),o=r[0],i=r[1];return(0,a.jsx)(u.Provider,{value:{bookDataCaches:o,addBookData:function(e,n){if(!(e in o)){var t=(0,l.Z)({},o);t[e]=n,i(t)}}},children:n})},h=t(9211),f=t(5474);function x(e){var n=e.url,t=e.position,r=e.makeRightElement,o=function(){return l?(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{src:l.thumbnail}),(0,a.jsxs)("div",{className:"pl-2",children:[l.title,(0,a.jsx)("br",{}),(0,a.jsxs)("small",{className:"text-secondary",children:["ISBN : ",l.isbn]})]})]}),(0,a.jsx)("div",{children:null==r?void 0:r(l)})]}):void 0},i=(0,c.useContext)(u),s=(0,c.useState)(null),l=s[0],d=s[1];switch((0,c.useEffect)(function(){var e=n.searchParams.get("isbn");e&&e in i.bookDataCaches?d(i.bookDataCaches[e]):(0,h.xd)(n).then(function(e){e&&(i.addBookData(e.isbn,e),d(e))})},[i,n]),t){case"top":return(0,a.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600",children:o()});case"center":return(0,a.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 dark:border-gray-600",children:o()});case"bottom":return(0,a.jsx)("li",{className:"w-full px-4 py-2 rounded-b-lg",children:o()})}}var m=t(1511),b=t(9028),v=t(1326),p=t(1055),g=t(909),j=(0,c.createContext)({selectedStore:"amazon",setSelectedStore:function(e){}}),y=function(e){var n=e.children,t=(0,c.useContext)(j),r=(0,c.useState)(t.selectedStore),o=r[0],i=r[1];return(0,a.jsx)(j.Provider,{value:{selectedStore:o,setSelectedStore:i},children:n})},k=t(9417),w=t(7814),N=t(1163);function C(e){var n=e.bookData,t=e.children,r=(0,c.useContext)(j),o=r.selectedStore,i=r.setSelectedStore,s=(0,c.useState)(!1),l=s[0],u=s[1];return(0,a.jsxs)("div",{className:"flex h-full items-center",children:[(0,a.jsxs)("div",{className:"flex justify-center flex-col",children:[function(){switch(o){case"amazon":return(0,a.jsx)(v.Z,{isbn:n.isbn});case"honto":return(0,a.jsx)(p.Z,{isbn:n.isbn});case"kinokuniya":return(0,a.jsx)(g.Z,{isbn:n.isbn})}}(),(0,a.jsx)("button",{className:"text-blue-500 mt-1 underline cursor-pointer",onClick:function(){u(!0)},children:"他のストア..."}),function(){if(l)return(0,a.jsxs)("ul",{className:"w-full cursor-pointer text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,a.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600",onClick:function(){i("amazon"),u(!1)},children:"Amazon"}),(0,a.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 dark:border-gray-600",onClick:function(){i("kinokuniya"),u(!1)},children:"紀ノ國屋"}),(0,a.jsx)("li",{className:"w-full px-4 py-2 rounded-b-lg",onClick:function(){i("honto"),u(!1)},children:"Honto"})]})}()]}),t]})}function S(){var e=(0,N.useRouter)().query,n=e.store,t=e.books,o=e.title,l=(0,c.useContext)(j),u=l.selectedStore,d=l.setSelectedStore,f=(0,c.useState)([]),m=f[0],b=f[1],v=(0,c.useState)(""),p=v[0],g=v[1],y=(0,c.useState)("無名のリスト"),S=y[0],_=y[1],I=(0,c.useState)(!1),Z=I[0],U=I[1];return(0,c.useEffect)(function(){d(function(){var e="string"==typeof n?n:"";switch(e){case"amazon":case"honto":case"kinokuniya":return e;default:return"amazon"}}()),"string"==typeof o&&_(o)},[n,d,o]),(0,c.useEffect)(function(){try{var e=[];if(Array.isArray(t))e=Array.from(new Set(t)).map(function(e){return new URL(e)}).filter(function(e){return(0,h.xr)(e)});else if("string"==typeof t){var n,r=new URL(t);if((null===(n=r.pathname.split("/"))||void 0===n?void 0:n[2])!=="share"||null==r.searchParams.get("isbn"))return;e=[r]}e.length>0&&b(e)}catch(o){}},[t]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"pt-5 text-xl text-center pb-2 text-slate-700",children:(0,a.jsx)("span",{className:"ml-1",children:"複数の書籍をまとめて共有できます。"})}),Z?(0,a.jsx)("input",{type:"text",value:S,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",onChange:function(e){_(e.target.value)}}):(0,a.jsxs)("h2",{className:"text-2xl",children:[S,(0,a.jsxs)("small",{className:"ml-2 text-secondary",children:["(",(0,a.jsx)("button",{className:"underline",onClick:function(){U(!0)},children:"編集"}),")"]})]}),function(){if(0!=m.length)return(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-end",children:[(0,a.jsx)("button",{className:"mr-1 text-blue-500 underline mb-1",onClick:function(){window.location.href=(0,h.k5)(m,u,S)},children:"一時保存"}),"/",(0,a.jsx)("button",{className:"mx-1 text-blue-500 underline mb-1",onClick:function(){window.open("./list")},children:"新規リスト(別タブ)"})]}),(0,a.jsx)("ul",{className:"w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:m.map(function(e,n){var t=0==n?"top":n==m.length-1?"bottom":"center";return 1==m.length&&(t="bottom"),(0,a.jsx)(x,{url:e,position:t,makeRightElement:function(e){return(0,a.jsx)(C,{bookData:e,children:(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"text-xl ml-5 text-yellow-600",onClick:function(){var e=i(m);e.splice(n,1),b(e)},children:(0,a.jsx)(w.G,{icon:k.g82})})})})}},e.href)})})]})}(),(0,a.jsxs)("div",{className:"text-center m-3",children:[(0,a.jsx)("span",{className:"text-secondary",children:"書籍共有URLをコピーした状態で↓を押してください。"}),(0,a.jsxs)("div",{className:"w-full mt-1",children:[(0,a.jsxs)("button",{onClick:function(){var e;navigator.clipboard.readText().then((e=(0,r.Z)(function(e){var n,t;return(0,s.__generator)(this,function(r){try{if(n=new URL(e),!(0,h.xr)(n))return g("コピーしているURLが有効ではありません。"),[2];t=Array.from(new Set(i(m.map(function(e){return e.href})).concat([n.href]))).map(function(e){return new URL(e)}),b(t)}catch(o){g("コピーしているURLが有効ではありません。")}return[2]})}),function(n){return e.apply(this,arguments)})).catch(function(){g("\xd7 ブラウザなどの設定からこのサイトに貼り付け許可を与えてください。 \xd7")})},className:"mx-auto bg-orange-500 hover:bg-orange-400 text-white font-bold py-2 px-4 border-b-4 border-orange-700 hover:border-orange-500 rounded",children:[(0,a.jsx)(w.G,{icon:k.r8p,className:"mr-1"}),"リストに追加"]}),(0,a.jsx)("br",{}),(0,a.jsx)("small",{className:"text-red-500",children:p})]})]}),(0,a.jsx)("hr",{className:"my-3"}),(0,a.jsx)("div",{className:"w-full text-center m-3",children:(0,a.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded",onClick:function(){var e;U(!1),null===(e=navigator.clipboard)||void 0===e||e.writeText((0,h.k5)(m,u,S))},children:["このリストを共有",(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:"共有URLを作成してコピー"})]})})]})}var _=function(){return(0,a.jsx)(y,{children:(0,a.jsx)(d,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Z,{title:"本を知り合いに「まとめて」紹介する - 読書日より/Share Books",description:"登録不要で簡単に書籍を共有・紹介できるサイトです。共有先が利用する書店に合わせて複数の書籍を共有することができます!",pageUrl:"https://books.sn-10.net/ja/share/list",ogType:"product"}),(0,a.jsx)(b.Z,{}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"w-full px-2 ",children:(0,a.jsx)(S,{})})}),(0,a.jsxs)("footer",{children:[(0,a.jsx)("hr",{}),(0,a.jsx)("p",{className:"text-center",children:(0,a.jsx)("a",{className:"underline",href:"https://hello.sn-10.net",children:"sn-10.net"})})]})]})})})}},9211:function(e,n,t){"use strict";t.d(n,{xr:function(){return c},X7:function(){return h},xd:function(){return d},k5:function(){return u},Sn:function(){return l}});var r=t(7568),o=t(655),i=t(4946),s=t(9528),a=t.n(s);function l(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="".concat(location.origin,"/ja/share?isbn=").concat(e,"&from=").concat(n);return""!=t&&(o+="&comment=".concat(encodeURIComponent(t))),r&&(o+="&noheader"),o}function c(e){var n;return!!e.href.startsWith(location.origin)&&!((null===(n=e.pathname.split("/"))||void 0===n?void 0:n[2])!=="share"||null==e.searchParams.get("isbn"))}function u(e,n,t){var r=new URLSearchParams;return e.forEach(function(e){return r.append("books",e.href)}),r.append("store",n),r.append("title",t),"".concat(location.origin,"/ja/share/list?").concat(r.toString())}function d(e){var n,t,r;return h(null!==(n=e.searchParams.get("isbn"))&&void 0!==n?n:"",null!==(t=e.searchParams.get("from"))&&void 0!==t?t:"")}function h(e,n){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(function(e,n){return(0,o.__generator)(this,function(t){switch(n){case"opendb":default:var r;return[2,a().get(e).then(function(e){var n,t,r,o=null===(n=e.data)||void 0===n?void 0:n[0];return o?{title:o.summary.title,author:o.summary.author,isbn:o.summary.isbn,publisher:o.summary.publisher,thumbnail:o.summary.cover,description:null!==(r=null===(t=o.onix.CollateralDetail.TextContent)||void 0===t?void 0:t[0].Text)&&void 0!==r?r:"",from:"openbd"}:null})];case"googlebooks":return[2,(0,i.a)(e).then(function(n){var t,r,o,i,s;return n?{title:n.volumeInfo.title,author:n.volumeInfo.authors.join(" "),isbn:e,publisher:null!==(o=n.volumeInfo.publisher)&&void 0!==o?o:"",thumbnail:null!==(i=null===(t=n.volumeInfo)||void 0===t?void 0:null===(r=t.imageLinks)||void 0===r?void 0:r.smallThumbnail)&&void 0!==i?i:"",description:null!==(s=n.volumeInfo.description)&&void 0!==s?s:"",from:"googlebooks"}:null})]}return[2,Promise.resolve(null)]})})).apply(this,arguments)}}},function(e){e.O(0,[976,948,664,61,95,774,888,179],function(){return e(e.s=5877)}),_N_E=e.O()}]);