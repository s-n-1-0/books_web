(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{5877:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ja/share/list",function(){return r(4462)}])},4462:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(7568);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=r(655),o=r(5893),i=r(7138),c=r(1511),u=r(9028),d=r(1326),x=r(1055),h=r(909),f=r(7313),m=r(578),b=r(7294),j=(0,b.createContext)({selectedStore:"amazon",setSelectedStore:function(e){}}),p=function(e){var t=e.children,r=(0,b.useContext)(j),n=(0,b.useState)(r.selectedStore),s=n[0],a=n[1];return(0,o.jsx)(j.Provider,{value:{selectedStore:s,setSelectedStore:a},children:t})},g=r(9211),y=r(9881),N=r(9417),v=r(7814),k=r(1163);function w(e){var t=e.bookData,r=e.children,n=(0,b.useContext)(j),s=n.selectedStore,a=n.setSelectedStore,l=(0,b.useState)(!1),i=l[0],c=l[1];return(0,o.jsxs)("div",{className:"flex h-full items-center",children:[(0,o.jsxs)("div",{className:"flex justify-center flex-col",children:[(0,o.jsx)("span",{className:"text-center text-slate-500",children:"購入先"}),function(){switch(s){case"amazon":return(0,o.jsx)(d.Z,{isbn:t.isbn});case"honto":return(0,o.jsx)(x.Z,{isbn:t.isbn});case"kinokuniya":return(0,o.jsx)(h.Z,{isbn:t.isbn})}}(),(0,o.jsx)("button",{className:"text-blue-500 mt-1 underline cursor-pointer",onClick:function(){c(!0)},children:"他のストア..."}),function(){if(i)return(0,o.jsxs)("ul",{className:"w-full cursor-pointer text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,o.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600",onClick:function(){a("amazon"),c(!1)},children:"Amazon"}),(0,o.jsx)("li",{className:"w-full px-4 py-2 border-b border-gray-200 dark:border-gray-600",onClick:function(){a("kinokuniya"),c(!1)},children:"紀ノ國屋"}),(0,o.jsx)("li",{className:"w-full px-4 py-2 rounded-b-lg",onClick:function(){a("honto"),c(!1)},children:"Honto"})]})}()]}),r]})}function S(){var e=(0,k.useRouter)().query,t=e.store,r=e.books,s=e.title,c=(0,b.useContext)(m.U),u=(0,b.useContext)(j),d=u.selectedStore,x=u.setSelectedStore,h=(0,b.useState)([]),p=h[0],S=h[1],C=(0,b.useState)(""),_=C[0],U=C[1],R=(0,b.useState)("無名のリスト"),A=R[0],L=R[1],E=(0,b.useState)(""),T=E[0],Z=E[1],P=(0,b.useState)(!1),z=P[0],D=P[1];(0,b.useEffect)(function(){x(function(){var e="string"==typeof t?t:"";switch(e){case"amazon":case"honto":case"kinokuniya":return e;default:return"amazon"}}()),"string"==typeof s&&""!=s&&L(s)},[t,x,s]),(0,b.useEffect)(function(){try{var e=[];if(Array.isArray(r))e=Array.from(new Set(r)).map(function(e){return new URL((0,g.Nk)(new URLSearchParams(e)))});else if("string"==typeof r){var t,n=new URL((0,g.Nk)(new URLSearchParams(r)));if((null===(t=n.pathname.split("/"))||void 0===t?void 0:t[2])!=="share"||null==n.searchParams.get("isbn"))return;e=[n]}e.length>0&&S(e)}catch(s){}},[r]);var G=function(){var e;navigator.clipboard.readText().then((e=(0,n.Z)(function(e){var t,r;return(0,l.__generator)(this,function(n){try{if(t=new URL(e),!(0,g.xr)(t))return U("コピーしているURLが有効ではありません。"),[2];r=Array.from(new Set(a(p.map(function(e){return e.href})).concat([t.href]))).map(function(e){return new URL(e)}),S(r),U("")}catch(s){U("コピーしているURLが有効ではありません。")}return[2]})}),function(t){return e.apply(this,arguments)})).catch(function(){U("\xd7 ブラウザなどの設定からこのサイトに貼り付け許可を与えてください。 \xd7")})};return(0,o.jsxs)("div",{className:" mx-auto ",style:{maxWidth:"1200px"},children:[function(){if(!(p.length>0))return(0,o.jsx)("h3",{className:"pt-5 text-xl text-center pb-2 text-slate-700",children:(0,o.jsx)("span",{className:"ml-1",children:"複数の書籍をまとめて共有することができます。"})})}(),(0,o.jsx)("p",{className:"text-center text-slate-500",children:"注意: リストを更新すると共有URLも更新されます!"}),(0,o.jsx)("hr",{className:"my-2"}),z?(0,o.jsx)("input",{type:"text",value:A,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",onChange:function(e){L(e.target.value)}}):(0,o.jsxs)("h2",{className:"text-2xl",children:[A,(0,o.jsxs)("small",{className:"ml-2 text-secondary",children:["(",(0,o.jsx)("button",{className:"underline",onClick:function(){D(!0)},children:"編集"}),")"]})]}),function(){if(0!=p.length)return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-end",children:[(0,o.jsx)("button",{className:"mr-1 text-blue-500 underline mb-1",onClick:function(){window.location.href=(0,g.k5)(p,d,A)},children:"一瞬保存(リロード)"}),"/",(0,o.jsx)("button",{className:"mx-1 text-blue-500 underline mb-1",onClick:function(){window.open("./list")},children:"新規リスト(別タブ)"})]}),(0,o.jsxs)("ul",{className:"w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[p.map(function(e,t){return(0,o.jsx)(i.Q,{url:e,position:0==t?"top":"center",headText:String(t+1),makeRightElement:function(e){return(0,o.jsx)(w,{bookData:e,children:(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"text-xl ml-5 text-yellow-600",onClick:function(){var e=a(p);e.splice(t,1),S(e)},children:(0,o.jsx)(v.G,{icon:N.g82})})})})}},e.href)}),(0,o.jsxs)("li",{className:"w-full px-4 py-2 rounded-b-lg text-center my-2 cursor-pointer",onClick:G,children:[(0,o.jsx)(v.G,{icon:N.r8p,className:"mr-1"}),"リストに追加"]})]})]})}(),(0,o.jsx)("div",{className:"text-center m-3",children:(0,o.jsxs)("div",{className:"w-full mt-1",children:[function(){if(!(p.length>0))return(0,o.jsxs)("button",{onClick:G,className:"mx-auto bg-orange-500 hover:bg-orange-400 text-white font-bold py-2 px-4 border-b-4 border-orange-700 hover:border-orange-500 rounded",children:[(0,o.jsx)(v.G,{icon:N.r8p,className:"mr-1"}),"リストに追加"]})}(),(0,o.jsx)("p",{className:"text-secondary",children:(0,o.jsx)("small",{children:"書籍ページの「この本を共有する」を押した後↑を押すと、リストに書籍が追加されます。"})}),(0,o.jsx)("small",{className:"text-red-500",children:_})]})}),(0,o.jsx)("hr",{className:"my-3"})," ",function(){if(0!=p.length)return(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 m-1 border-b-4 border-blue-700 hover:border-blue-500 rounded",onClick:function(){var e;D(!1),U(""),Z("共有URLをコピーしました。"),null===(e=navigator.clipboard)||void 0===e||e.writeText((0,g.k5)(p,d,A))},children:"共有URLを生成"})," ",(0,o.jsx)("p",{className:"text-secondary",children:(0,o.jsx)("small",{children:T})}),(0,o.jsxs)("div",{className:"flex flex-wrap justify-center items-center",children:[(0,o.jsx)("div",{className:"m-1",children:(0,o.jsx)(f.Z,{text:"「".concat(A,"」の共有"),url:(0,g.k5)(p,d,A)})}),(0,o.jsxs)("button",{onClick:function(){var e;U(""),Z("マークダウン形式でコピーしました。"),null===(e=navigator.clipboard)||void 0===e||e.writeText((0,y.cI)(p.map(function(e){var t,r=null!==(t=e.searchParams.get("isbn"))&&void 0!==t?t:"";return{url:e,bookData:c.bookDataCaches[r]}}),d,A))},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full inline-flex items-center m-1",children:[(0,o.jsx)(v.G,{icon:N.kZ_,className:"mr-1"}),(0,o.jsx)("span",{children:"マークダウン形式で共有"})]})]}),(0,o.jsxs)("small",{className:"text-secondary",children:[(0,o.jsx)("b",{children:"note"}),"や",(0,o.jsx)("b",{children:"Notion"}),"などのサイトには「マークダウン形式で共有」がおすすめです!"]})]})}()]})}var C=function(){return(0,o.jsx)(p,{children:(0,o.jsx)(m.f,{children:(0,o.jsxs)("div",{children:[(0,o.jsx)(c.Z,{title:"本を知り合いに「まとめて」紹介する - 読書日より/Share Books",description:"登録不要で簡単に書籍を共有・紹介できるサイトです。共有先が利用する書店に合わせて複数の書籍を共有することができます!",pageUrl:"https://books.sn-10.net/ja/share/list",ogType:"product"}),(0,o.jsx)(u.Z,{}),(0,o.jsx)("main",{children:(0,o.jsx)("div",{className:"w-full px-2 ",children:(0,o.jsx)(S,{})})}),(0,o.jsxs)("footer",{children:[(0,o.jsx)("hr",{}),(0,o.jsx)("p",{className:"text-center",children:(0,o.jsx)("a",{className:"underline",href:"https://hello.sn-10.net",children:"sn-10.net"})})]})]})})})}}},function(e){e.O(0,[976,948,664,673,422,559,774,888,179],function(){return e(e.s=5877)}),_N_E=e.O()}]);