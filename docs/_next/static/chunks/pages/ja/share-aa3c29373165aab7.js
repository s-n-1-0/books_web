(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{910:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ja/share",function(){return n(4027)}])},4027:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return G}});var t=n(1799),l=n(5893),r=n(9417),a=n(7814),i=n(7294),c=(0,i.forwardRef)(function(e,s){var n,t=e.comment,c=e.onChange,d=(0,i.useState)(!1),x=d[0],o=d[1];return((0,i.useImperativeHandle)(s,function(){return{finishEditing:function(){o(!1)}}}),x||""!=t)?x?(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:["コメント",(0,l.jsx)("small",{className:"ml-2",children:"コメントが2行以上の場合、1行目がタイトルとして表示されます。"})]}),(0,l.jsx)("textarea",{rows:4,className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"この本は...",value:t,onChange:function(e){c(e.target.value)}})]}):(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:" lg:w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",title:"Woman holding a mug"}),(0,l.jsx)("div",{className:"border border-gray-400 lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",children:(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,l.jsx)(a.G,{icon:r.Mzg}),(0,l.jsx)("span",{className:"pl-1",children:"コメント"}),(0,l.jsxs)("span",{className:"font-bold text-secondary",children:["(",(0,l.jsx)("u",{className:"cursor-pointer",onClick:function(){o(!0)},children:"編集"})," ","/"," ",(0,l.jsx)("u",{className:"cursor-pointer",onClick:function(){c(""),o(!0)},children:"新しくコメントする"}),")"]})]}),(n=t.split("\n")).length>1?(0,l.jsxs)("div",{children:[" ",(0,l.jsx)("div",{className:"text-gray-900 font-bold text-xl my-2",children:n[0]}),(0,l.jsx)("p",{className:"text-gray-700 text-base",children:n.slice(1).join("\n")})]}):(0,l.jsx)("p",{className:"text-gray-700 text-base",children:t})]})})]}):(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("span",{className:"underline cursor-pointer",onClick:function(){o(!0)},children:"この本にコメントを残す"})})}),d=n(5474),x=n(1511),o=n(9028),h=n(5921),u=n(1664),m=n.n(u),j=n(6774),f=function(e){var s=e.errorText;return(0,l.jsxs)("div",{className:"text-center mt-2 mx-auto",style:{maxWidth:"1250px"},children:[(0,l.jsxs)("div",{className:"py-10 text-start px-3 bg-gray-100 relative mx-auto",style:{height:"80vh",minHeight:"500px",maxHeight:"800px"},children:[(0,l.jsxs)("div",{className:"relative flex flex-col justify-between z-10 h-full",children:[(0,l.jsxs)("div",{className:"bg-white rounded w-fit mx-2 p-2",style:{fontFamily:"'游明朝 Medium','Yu Mincho',YuMincho,'Hiragino Mincho Pro',serif"},children:[(0,l.jsx)("h1",{className:"text-3xl text-my-color md:text-4xl",children:"読書日より"}),(0,l.jsx)("hr",{className:"mt-1"}),(0,l.jsx)("p",{className:"text-slate-500 text-sm md:text-base",children:"登録不要で簡単に書籍を共有することができます。"})]}),(0,l.jsx)("div",{className:"mx-auto w-full",style:{maxWidth:"800px"},children:(0,l.jsx)(j.Z,{errorText:s})}),(0,l.jsx)("p",{className:"pt-2 px-2 text-white text-end opacity-90",children:(0,l.jsxs)("small",{children:["Painted by"," ",(0,l.jsx)("a",{href:"https://www.midjourney.com/",className:"underline",children:"Midjourney"}),"."]})})]}),(0,l.jsx)("div",{className:"absolute py-3 px-1 h-full w-full top-0 right-0",children:(0,l.jsx)("div",{className:"relative h-full w-full",children:(0,l.jsx)("img",{className:"object-cover ml-auto z-0 rounded-md h-full w-full",src:"/mid_thumbnail.webp",alt:"Painted by Midjourney"})})})]}),(0,l.jsx)("p",{className:"text-center text-secondary",children:(0,l.jsx)(m(),{href:"/ja/help/find",children:(0,l.jsxs)("a",{className:"underline",children:[(0,l.jsx)(a.G,{icon:r.Psp,className:"mr-2"}),"書籍が見つからない場合..."]})})})]})},p=n(7094),b=n(1055),N=n(909),g=function(e){var s=e.isbn;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-center items-center m-3",children:[(0,l.jsx)(p.Z,{isbn:s}),(0,l.jsx)(N.Z,{isbn:s}),(0,l.jsx)(b.Z,{isbn:s})]}),(0,l.jsx)("p",{className:"text-center text-secondary",children:(0,l.jsx)(m(),{href:"/ja/help/find",children:(0,l.jsxs)("a",{className:"underline",children:[(0,l.jsx)(a.G,{icon:r.Psp,className:"mr-2"}),"取り扱い書店の追加をリクエストする..."]})})})]})},y=n(7313),v=n(3430),w=n(4549),k=n(2337),S=n(2336),_=n(9881),Z=n(4274),C=n(4184),E=n.n(C),R=n(1163),G=function(){var e=function(){return"string"==typeof j?decodeURIComponent(j):""},s=(0,R.useRouter)(),n=s.query,u=n.isbn,m=n.from,j=n.comment,p=(0,i.useState)(null),b=p[0],N=p[1],C=function(e){N((0,t.Z)({},e,(0,Z.convertIsbn)(e.isbn)))},G=(0,i.useState)(""),T=G[0],M=G[1],P=(0,i.useState)(!1),U=P[0],W=P[1],z=(0,i.useState)(!1),H=z[0],I=z[1],L=(0,i.useState)(""),Y=L[0],q=L[1],B=(0,i.useRef)(null);(0,i.useEffect)(function(){$(e())},[j]);var O,X,D=(0,i.useState)(e()),F=D[0],$=D[1];return(0,i.useEffect)(function(){s.isReady&&("string"==typeof u?(W(!1),(0,k.Rd)(u,"string"==typeof m?m:"").then(function(e){e?(C(e),W(!1)):M("書籍情報を見つけることができませんでした。")}).catch(function(){M("通信エラー。時間を置いてからご確認ください。")})):W(!0))},[s.query]),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.Z,{title:"本を知り合いに紹介する - 読書日より/Share Books",description:"登録不要で簡単に書籍を共有・紹介できるサイトです。書籍レビューや書店へのリンクを含む共有URLを発行することができます。ご自由にお使いください。",pageUrl:"https://books.sn-10.net/ja/share",ogType:"product"}),(0,l.jsx)(o.Z,{}),(0,l.jsx)("main",{children:(0,l.jsx)("div",{className:"w-full px-2 ",children:U||""!=T?(0,l.jsx)(f,{errorText:T}):b?(0,l.jsxs)("div",{className:"mx-auto",style:{maxWidth:"1250px"},children:[(0,l.jsxs)("div",{className:"flex items-center justify-center pt-5 pb-2",children:[function(){if(""!=b.thumbnail)return(0,l.jsx)("span",{className:"mr-2",children:(0,l.jsx)(d.Z,{src:b.thumbnail})})}(),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-3xl",children:b.title}),(0,l.jsxs)("p",{className:"text-center",children:[(0,l.jsxs)("span",{className:E()({hidden:""==b.author}),children:["著者: ",b.author]}),(0,l.jsxs)("span",{className:E()({hidden:""==b.author||""==b.publisher}),children:[" ","/"," "]}),(0,l.jsxs)("span",{className:E()({hidden:""==b.publisher}),children:["出版社 :",b.publisher]})]})]})]}),(0,l.jsxs)("p",{className:"text-secondary flex content-center justify-center items-center",children:[(0,l.jsx)("span",{className:"pr-2",children:"ISBN"}),(0,l.jsxs)("p",{className:"flex flex-col",children:[(0,l.jsxs)("span",{children:["10桁 : ",b.isbn10," ",(0,l.jsx)("button",{onClick:function(){I(!H)},className:"text-xl "+E()({hidden:H}),children:(0,l.jsx)(a.G,{icon:r.eW2})})]}),(0,l.jsxs)("span",{className:E()({hidden:!H}),children:["13桁 : ",b.isbn13]})]})]}),(0,l.jsx)("p",{className:"text-center mt-1 line-clamp-5",children:b.description}),(0,l.jsxs)("div",{className:"p-10",children:[(0,l.jsx)(c,{comment:F,onChange:function(e){$(e)},ref:B}),(0,l.jsxs)("div",{className:"text-center mt-6 mb-10",children:[(0,l.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded",onClick:function(){var e;q("共有URLをコピーしました。"),null==B||null===(e=B.current)||void 0===e||e.finishEditing(),w.Z.writeText((0,S.Sn)(b.isbn,b.from,F)),(0,v.bG)({key:"completedSharing",data:{type:"default",url:""}})},children:["この本を共有する",(0,l.jsx)("br",{}),(0,l.jsx)("small",{children:"URLをコピー"})]}),function(){if(""!=Y)return(0,l.jsx)("p",{className:"text-center text-secondary",children:(0,l.jsx)("small",{children:Y})})}(),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mt-3 flex justify-center items-center flex-wrap",children:[(O="",O=""!=F?(F.length>75?F.slice(0,70)+"...":F)+"\n\n"+"書籍「".concat(b.title,"」"):"書籍「".concat(b.title,"」"),X=(0,S.Sn)(b.isbn,b.from,F),(0,l.jsx)(y.Z,{text:O,url:X})),(0,l.jsxs)("button",{onClick:function(){var e;q("マークダウン形式でコピーしました。"),null==B||null===(e=B.current)||void 0===e||e.finishEditing(),w.Z.writeText((0,_.GE)({bookData:b,comment:F,isWriteSiteName:!0})),(0,v.bG)({key:"completedSharing",data:{type:"default",url:""}})},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full inline-flex items-center m-2",children:[(0,l.jsx)(a.G,{icon:r.kZ_,className:"mr-1"}),(0,l.jsx)("span",{children:"マークダウン形式で共有"})]})]}),(0,l.jsxs)("small",{className:"text-secondary",children:[(0,l.jsx)("b",{children:"note"}),"や",(0,l.jsx)("b",{children:"Notion"}),"などのサイトには「マークダウン形式で共有」がおすすめです!"]})]}),(0,l.jsx)("a",{href:(0,S.k5)([new URL((0,S.Sn)(b.isbn,b.from,F)),],"amazon",""),className:"underline text-blue-500 mt-2",children:"他の書籍とまとめて共有する"})]}),(0,l.jsx)("hr",{}),(0,l.jsxs)("div",{className:"pt-2",children:[(0,l.jsxs)("h1",{className:"text-xl",children:[(0,l.jsx)(a.G,{icon:r.Y$T,className:"mr-2"}),"書店を探す"]}),(0,l.jsx)("small",{children:"紙の書籍と電子書籍両方のリンクが含まれます。選択にご注意ください。"}),(0,l.jsx)(g,{isbn:b.isbn})]})]})]}):(0,l.jsx)("div",{children:(0,l.jsx)(h.Z,{})})})}),(0,l.jsxs)("footer",{children:[(0,l.jsx)("hr",{}),(0,l.jsx)("p",{className:"text-center",children:(0,l.jsx)("a",{className:"underline",href:"https://hello.sn-10.net",children:"sn-10.net"})})]})]})}}},function(e){e.O(0,[948,996,849,606,774,888,179],function(){return e(e.s=910)}),_N_E=e.O()}]);